<!DOCTYPE html>
<html>

  <head>
    <title>Creating a server with Node.js</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        text-align: center;
      }

      select {
        padding: 8px;
        margin: 10px;
        width: 200px;
      }

      #result {
        margin-top: 20px;
        font-weight: bold;
      }
    </style>
  </head>

  <body>
    <h1>Creating a server with Node.js</h1>
    <p>Hello, I'm a Node.js server for searching vehicle plate number!</p>

    <select id="provinceSelect">
      <option value="">Chọn tỉnh</option>
    </select>

    <div id="result"></div>

    <script>
      // Fetch provinces when page loads
      fetch('/api/plates')
        .then(response => response.json())
        .then(provinces => {
          const select = document.getElementById('provinceSelect');
          provinces.forEach(province => {
            const option = document.createElement('option');
            option.value = province;
            option.textContent = province;
            select.appendChild(option);
          });
        });

      // Handle selection change
      document.getElementById('provinceSelect').addEventListener('change', function () {
        const province = this.value;
        if (province) {
          fetch(`/api/plates/${province}`)
            .then(response => response.json())
            .then(data => {
              document.getElementById('result').textContent = `Biển số xe: ${data.plateNumber}`;
            })
            .catch(error => {
              console.error('Error:', error);
              document.getElementById('result').textContent = 'Có lỗi xảy ra';
            });
        } else {
          document.getElementById('result').textContent = '';
        }
      });
    </script>
  </body>

</html>